---
phase: 02-content-display
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - app/pages/blog/index.vue
  - app/pages/blog/[slug].vue
  - app/components/BlogPostCard.vue
autonomous: true

must_haves:
  truths:
    - "Visitor sees list of posts at /blog in reverse chronological order"
    - "Visitor can click a post card and navigate to /blog/[slug]"
    - "Individual post page displays full markdown content"
    - "Post metadata (title, date, description) displays on both pages"
  artifacts:
    - path: "app/pages/blog/index.vue"
      provides: "Blog index with post listing"
      contains: ".sort"
    - path: "app/pages/blog/[slug].vue"
      provides: "Individual post page"
      contains: "ContentRenderer"
    - path: "app/components/BlogPostCard.vue"
      provides: "Post card component"
      contains: "NuxtLink"
  key_links:
    - from: "app/pages/blog/index.vue"
      to: "queryContent('blog')"
      via: "useAsyncData composable"
      pattern: "queryContent.*blog.*find"
    - from: "app/pages/blog/index.vue"
      to: "app/components/BlogPostCard.vue"
      via: "component import"
      pattern: "BlogPostCard"
    - from: "app/pages/blog/[slug].vue"
      to: "queryContent('blog')"
      via: "useAsyncData with path filter"
      pattern: "queryContent.*where.*path"
    - from: "BlogPostCard.vue"
      to: "/blog/[slug]"
      via: "NuxtLink with slug"
      pattern: "NuxtLink.*to.*blog"
---

<objective>
Build the blog index page and individual post pages with full content rendering.

Purpose: Delivers the core blog reading experience - visitors can browse posts chronologically on the index page and read full posts on individual pages.

Output: Functional blog index showing posts sorted by date, clickable post cards, and individual post pages rendering markdown content.
</objective>

<execution_context>
@/Users/slip/.claude/get-shit-done/workflows/execute-plan.md
@/Users/slip/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-content-display/02-01-SUMMARY.md

@app/pages/blog/index.vue
@app/pages/galleries/index.vue
@app/pages/galleries/[collection].vue
@app/components/CollectionCard.vue
@content.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BlogPostCard component</name>
  <files>app/components/BlogPostCard.vue</files>
  <action>
Create a reusable card component for displaying blog post previews in the index.

Follow the CollectionCard.vue pattern for styling consistency but adapt for blog posts.

Component should:
1. Accept a `post` prop with typed interface matching the schema:
   ```typescript
   interface BlogPost {
     path: string      // e.g., "/blog/first-post"
     title: string
     date: string
     description: string
     image?: string
   }
   ```

2. Display:
   - Post title (h3, linked to post)
   - Formatted date (e.g., "January 29, 2026")
   - Description text (truncated if needed)
   - Optional cover image (if post.image exists)

3. Styling:
   - Use Tailwind classes consistent with existing components
   - Cards should work in a vertical list layout (not grid)
   - Hover state for interactivity
   - Dark mode support (use dark: variants)

4. Link:
   - Wrap in NuxtLink to `post.path` (Nuxt Content provides the path)
   - OR construct from slug: `/blog/${post.path.split('/').pop()}`

Date formatting: Use JavaScript's toLocaleDateString or create a simple formatter. Keep it simple - no external date libraries needed.
  </action>
  <verify>
Run `bun run dev`. The component should be auto-imported.
No TypeScript errors in terminal.
  </verify>
  <done>
BlogPostCard.vue exists with typed props, displays title/date/description, links to post URL.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update blog index to display posts chronologically</name>
  <files>app/pages/blog/index.vue</files>
  <action>
Update the existing blog index page to render a list of posts sorted by date (newest first).

Changes to make:
1. Keep the existing queryContent call but add sorting:
   ```typescript
   queryContent('blog')
     .sort({ date: -1 })  // Descending (newest first)
     .find()
   ```

2. Replace the placeholder content with:
   - Loop through postsList using v-for
   - Render BlogPostCard for each post
   - Pass the post object to the card component

3. Keep the empty state for when no posts exist

4. Update the layout:
   - Posts in a single column with spacing (space-y-8 or similar)
   - Consistent with site's minimal aesthetic
   - UContainer for max-width

5. Keep the existing SEO meta tags

Structure:
```vue
<div v-if="postsList.length === 0">Posts coming soon.</div>
<div v-else class="space-y-8">
  <BlogPostCard v-for="post in postsList" :key="post.path" :post="post" />
</div>
```
  </action>
  <verify>
1. Run `bun run dev`
2. Visit http://localhost:3000/blog
3. Should see the sample post from Plan 01 rendered as a card
4. If multiple posts existed, they would appear newest first
  </verify>
  <done>
Blog index displays posts in reverse chronological order using BlogPostCard components.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create individual post page with content rendering</name>
  <files>app/pages/blog/[slug].vue</files>
  <action>
Create the dynamic route page for individual blog posts.

The page should:
1. Extract slug from route params: `route.params.slug`

2. Query the specific post:
   ```typescript
   const { data: post } = await useAsyncData(`blog-${slug}`, () =>
     queryContent('blog')
       .where({ path: `/blog/${slug}` })
       .findOne()
   )
   ```

3. Display post metadata at top:
   - Title (h1)
   - Formatted date
   - Description (optional, as subtitle)

4. Render markdown content using Nuxt Content's ContentRenderer:
   ```vue
   <ContentRenderer v-if="post" :value="post" />
   ```

5. Add breadcrumb navigation (follow galleries/[collection].vue pattern):
   Home > Blog > {Post Title}

6. Handle 404:
   - If post not found, show error state or throw createError
   - Pattern from galleries/[collection].vue

7. SEO:
   - Dynamic title: `${post.title} - Fiftymillimeter`
   - Dynamic description from post.description
   - Use useSeoMeta with computed values

8. Style the prose content:
   - Nuxt Content uses `prose` classes by default
   - Ensure dark mode works (prose-invert or dark:prose-invert)
   - Images in markdown should be responsive
  </action>
  <verify>
1. Run `bun run dev`
2. Visit http://localhost:3000/blog
3. Click on the sample post card
4. Should navigate to http://localhost:3000/blog/first-post
5. Post title, date, and markdown content should render
6. Breadcrumb shows: Home > Blog > Welcome to the Blog
  </verify>
  <done>
Individual post page renders at /blog/[slug], displays metadata and full markdown content via ContentRenderer.
  </done>
</task>

</tasks>

<verification>
1. `bun run dev` starts without errors
2. http://localhost:3000/blog shows post listing
3. Posts sorted by date (newest first)
4. Clicking a post navigates to /blog/[slug]
5. Post page shows title, date, full markdown content
6. Breadcrumb navigation works
7. SEO meta tags update per page
</verification>

<success_criteria>
- Blog index displays all posts in reverse chronological order
- Post cards show title, date, description
- Clicking a card navigates to the individual post
- Individual post page renders full markdown content
- All Phase 2 success criteria from roadmap are met
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-display/02-02-SUMMARY.md`
</output>
